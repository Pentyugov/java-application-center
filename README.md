# JAC (Java Application Center) — Desktop (Go + Wails + Angular)

Десктопное приложение для управления набором Java `.jar` сервисов:

- хранение списка сервисов, запуск/остановка по одному и массово;
- управление JVM аргументами и переменными окружения;
- просмотр логов;
- быстрый Git checkout веток для связанных репозиториев.

Стек:
- **Backend:** Go + Wails v2
- **Frontend:** Angular (standalone components) + Angular Material + CDK Drag&Drop
- **OS:** ориентировано на **Windows** (используются `jps`, `cmd.exe`, WinAPI terminate process, tray icon)

---

## Возможности

### Управление сервисами (.jar)
- Список сервисов (JAR-файлы) с отображением статуса (запущен/остановлен) и PID.
- **Run / Stop** выбранного сервиса.
- **Run All / Stop All** — запуск/остановка всех активных сервисов.
- Порядок запуска сервисов через **Drag&Drop** (CDK), сохраняется в конфиг.
- Дублирование сервиса (Clone).
- Включение/отключение сервиса (**Active/Inactive**) — влияет на Run All.

### JVM параметры и переменные окружения
- CRUD для **JVM args** (список строк).
- CRUD для **env variables** (name/value) на уровне конкретного сервиса.

### Настройки приложения
- `CentralInfoPath` — папка хранения `central-info.json`.
- `ApplicationStartingDelaySec` — задержка между стартами при Run All.
- `MinimizeToTrayOnClose` — при закрытии скрывать в трей вместо выхода.
- `StartQuietMode` — тихий режим запуска (без консольных окон; stdout/stderr в лог-файл).

### Логи
- В тихом режиме логи пишутся в файл вида `jac-<AppName>.log`.
- В UI есть окно Log, которое получает строки через Wails events (streaming).

### Git интеграция
- Для сервиса можно выбрать папку Git репозитория (проверяется наличие `.git`).
- Просмотр текущей ветки, локальных и remote веток.
- Checkout ветки:
    - если пришла ветка вида `origin/<name>` — переключение на локальную `<name>`
    - защита: рабочее дерево должно быть чистым (иначе ошибка)

### System tray
- Иконка в трее, пункты: **Показать**, **Скрыть**, **Выход**.
- Двойной клик по иконке — показать окно.
---

## Хранение данных

Приложение хранит конфиги в профиле пользователя (Windows Roaming):
Имя папки приложения: `JAC`.
```
C:\Users<Имя_пользователя>\AppData\Roaming\JAC
```

- **settings.json** — настройки приложения
- **central-info.json** — список сервисов и их параметры
- **logs/** — логи приложения и логи сервисов (в quiet mode)

---

## Требования для локальной сборки

### 1) Go
- Рекомендуется **Go 1.21+**.

Проверка:
```
go version
```

### 2) Node.js + npm
- Рекомендуется Node.js 18+ / 20+
```
node -v
npm -v
```

### 3) Wails v2
- Установка:
```
go install github.com/wailsapp/wails/v2/cmd/wails@latest
```
Проверка:
```
wails version
```

### 4) Java (для jps)
Для отображения запущенных jar-процессов используется утилита jps (идёт в составе JDK).
Установи JDK и добавь JAVA_HOME и PATH, чтобы jps был доступен.

Проверка:
```
jps -lv
```

## Быстрый старт (dev режим)

Команды выполняются из корня репозитория.

### Установить зависимости фронтенда
```
cd frontend
npm install
cd ..
```
### Запуск в dev режиме
```
wails dev
```
## Сборка релиза

### Собрать приложение:
```
wails build
```
### Пример для Windows:
```
wails build -platform windows/amd64
```